<page-header [header]="'Member details' + ' #' + memberID">
  <mx-button (handleClick)="handleSubmit()">
    <span class="flex items-center">
      <p>Save</p>
    </span>
  </mx-button>
</page-header>
<member-form formType="update" />

<div class="my-4"></div>
<div class="grid grid-cols-1 md:grid-cols-4 gap-4 py-4">
  <stats-card title="Total Spent" [amount]="totalSpent || 0" />
  <stats-card title="Attendance This Month" value="30%" />
  <div mxCard>
    <div
      mxCardHeader
      class="flex-row items-center justify-between space-y-1 py-4 px-6"
    >
      <div mxCardtitle>
        Weight
      </div>
    </div>
    <div mxCardContent>
        <p class="text-2xl font-bold">{{ memberData?.weight }}kg</p>
    </div>
  </div>
  <div mxCard>

    <div
      mxCardHeader
      class="flex-row items-center justify-between space-y-1 py-4 px-6"
    >
      <div mxCardtitle>
        BMI
      </div>
    </div>
    <div mxCardContent class="flex justify-between items-center">
        <p class="text-2xl font-bold">{{ memberData?.bmi }}</p>
      <!-- <div id="bmi-gauge" class=" h-[150px] w-[100px]"></div> -->
    </div>
  </div>
</div>
@if (memberData?.id) {
  <div class="my-4"></div>
  <mx-grid-shell
    [apiURL]="'/member/membership-detail-list/' + memberData?.id"
    gridTitle="Plan History"
    maxHeight="200"
    minHeight="200"
  >
    <mx-toolbar
      name="Add Membership"
      icon="add"
      (handleClick)="openAddNewMemberShip()"
    />

    <mx-column field="plan.name" title="Plan" />
    <mx-column field="plan.amount" title="Amount" />
    <mx-column field="memberPlan.startDate" title="Start Date">
      <ng-template #cell let-item>
        {{ item.memberPlan.startDate | date: 'mediumDate' }}
      </ng-template>
    </mx-column>
    <mx-column field="memberPlan.endDate" title="End Date">
      <ng-template #cell let-item>
        {{ item.memberPlan.endDate | date: 'mediumDate' }}
      </ng-template>
    </mx-column>
    <mx-column field="memberPlan.paid" title="Paid">
      <ng-template #cell let-item>
        <mx-badge
          [text]="item.memberPlan.paid ? 'Yes' : 'No'"
          [variant]="item.memberPlan.paid ? 'success' : 'error'"
          [clearable]="false"
        />
      </ng-template>
    </mx-column>
  </mx-grid-shell>
}
